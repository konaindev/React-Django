import datetime
from decimal import Decimal

from remark_airflow.insights.impl.constants import Trend

all_base_kpis = [
    {
        "acq_demand_creation": Decimal("0.00"),
        "acq_leasing_enablement": Decimal("0.00"),
        "acq_market_intelligence": Decimal("0.00"),
        "acq_reputation_building": Decimal("0.00"),
        "average_monthly_rent": Decimal("1948.00"),
        "end": datetime.date(2019, 9, 28),
        "highest_monthly_rent": Decimal("0.00"),
        "inquiries": 36,
        "lease_applications": 5,
        "lease_cds": 1,
        "lease_renewal_notices": 1,
        "lease_renewals": 0,
        "lease_vacation_notices": 5,
        "leased_units_end": 179,
        "leased_units_start": 172,
        "leases_ended": 0,
        "leases_executed": 4,
        "lowest_monthly_rent": Decimal("1400.00"),
        "move_ins": 5,
        "move_outs": 0,
        "occupiable_units_start": 199,
        "occupied_units_end": None,
        "occupied_units_start": 164,
        "ret_demand_creation": Decimal("0.00"),
        "ret_leasing_enablement": Decimal("0.00"),
        "ret_market_intelligence": Decimal("0.00"),
        "ret_reputation_building": Decimal("0.00"),
        "start": datetime.date(2019, 9, 21),
        "tours": 14,
        "usvs": 414,
        "total_units": 220,
    },
    {
        "acq_demand_creation": Decimal("0.00"),
        "acq_leasing_enablement": Decimal("0.00"),
        "acq_market_intelligence": Decimal("0.00"),
        "acq_reputation_building": Decimal("0.00"),
        "average_monthly_rent": Decimal("1948.00"),
        "end": datetime.date(2019, 9, 21),
        "highest_monthly_rent": Decimal("0.00"),
        "inquiries": 36,
        "lease_applications": 5,
        "lease_cds": 1,
        "lease_renewal_notices": 1,
        "lease_renewals": 0,
        "lease_vacation_notices": 5,
        "leased_units_end": 179,
        "leased_units_start": 172,
        "leases_ended": 0,
        "leases_executed": 4,
        "lowest_monthly_rent": Decimal("1400.00"),
        "move_ins": 5,
        "move_outs": 0,
        "occupiable_units_start": 199,
        "occupied_units_end": None,
        "occupied_units_start": 164,
        "ret_demand_creation": Decimal("0.00"),
        "ret_leasing_enablement": Decimal("0.00"),
        "ret_market_intelligence": Decimal("0.00"),
        "ret_reputation_building": Decimal("0.00"),
        "start": datetime.date(2019, 9, 14),
        "tours": 14,
        "usvs": 414,
        "total_units": 220,
    },
]

all_target_kpis = [
    {
        "acq_investment": Decimal("1998.43"),
        "delta_leases": 4,
        "end": datetime.date(2019, 9, 28),
        "inquiries": 35,
        "lease_applications": 7,
        "lease_cds": 1,
        "lease_renewal_notices": 3,
        "lease_renewals": 0,
        "lease_vacation_notices": 2,
        "leased_rate": Decimal("0.940"),
        "leases_executed": 6,
        "move_ins": 6,
        "move_outs": 2,
        "occupied_units": 150,
        "ret_investment": Decimal("790.00"),
        "start": datetime.date(2019, 9, 21),
        "tours": 13,
        "usvs": 480,
    },
    {
        "acq_investment": Decimal("1998.43"),
        "delta_leases": 4,
        "end": datetime.date(2019, 9, 21),
        "inquiries": 35,
        "lease_applications": 7,
        "lease_cds": 1,
        "lease_renewal_notices": 3,
        "lease_renewals": 0,
        "lease_vacation_notices": 2,
        "leased_rate": Decimal("0.940"),
        "leases_executed": 6,
        "move_ins": 6,
        "move_outs": 2,
        "occupied_units": 150,
        "ret_investment": Decimal("790.00"),
        "start": datetime.date(2019, 9, 14),
        "tours": 13,
        "usvs": 480,
    },
]

all_computed_kpis = [
    {
        "acq_demand_creation": Decimal("0.00"),
        "acq_investment": Decimal("0.00"),
        "acq_leasing_enablement": Decimal("0.00"),
        "acq_market_intelligence": Decimal("0.00"),
        "acq_reputation_building": Decimal("0.00"),
        "acq_romi": 0,
        "app_cost": Decimal("0.00"),
        "app_exe": 0.8,
        "average_monthly_rent": Decimal("1948.00"),
        "delta_leases": 4,
        "end": datetime.date(2019, 9, 28),
        "estimated_acq_revenue_gain": Decimal("93504.00"),
        "estimated_ret_revenue_gain": Decimal("23376.00"),
        "estimated_revenue_gain": Decimal("116880.00"),
        "exe_cost": Decimal("0.00"),
        "exe_to_lowest_rent": 0.0,
        "highest_monthly_rent": Decimal("0.00"),
        "inq_cost": Decimal("0.00"),
        "inq_tou": 0.3888888888888889,
        "inquiries": 36,
        "investment": Decimal("0.00"),
        "lease_applications": 5,
        "lease_cd_rate": 0.2,
        "lease_cds": 1,
        "lease_renewal_notices": 1,
        "lease_renewals": 0,
        "lease_vacation_notices": 5,
        "leased_rate": 0.8136363636363636,
        "leased_units": 179,
        "leased_units_end": 179,
        "leased_units_start": 172,
        "leases_ended": 0,
        "leases_executed": 4,
        "lowest_monthly_rent": Decimal("1400.00"),
        "move_ins": 5,
        "move_outs": 0,
        "occupancy_rate": 0.8492462311557789,
        "occupiable_units": 199,
        "occupiable_units_start": 199,
        "occupied_units": 169,
        "occupied_units_end": None,
        "occupied_units_start": 164,
        "renewal_rate": 0.16666666666666666,
        "resident_decisions": 6,
        "ret_demand_creation": Decimal("0.00"),
        "ret_investment": Decimal("0.00"),
        "ret_leasing_enablement": Decimal("0.00"),
        "ret_market_intelligence": Decimal("0.00"),
        "ret_reputation_building": Decimal("0.00"),
        "ret_romi": 0,
        "romi": 0,
        "start": datetime.date(2019, 9, 21),
        "tou_app": 0.35714285714285715,
        "tou_cost": Decimal("0.00"),
        "tours": 14,
        "usv_cost": Decimal("0.00"),
        "usv_exe": 0.00966183574879227,
        "usv_inq": 0.08695652173913043,
        "usvs": 414,
        "total_units": 220,
    },
    {
        "acq_demand_creation": Decimal("0.00"),
        "acq_investment": Decimal("0.00"),
        "acq_leasing_enablement": Decimal("0.00"),
        "acq_market_intelligence": Decimal("0.00"),
        "acq_reputation_building": Decimal("0.00"),
        "acq_romi": 0,
        "app_cost": Decimal("0.00"),
        "app_exe": 0.8,
        "average_monthly_rent": Decimal("1948.00"),
        "delta_leases": 4,
        "end": datetime.date(2019, 9, 21),
        "estimated_acq_revenue_gain": Decimal("93504.00"),
        "estimated_ret_revenue_gain": Decimal("23376.00"),
        "estimated_revenue_gain": Decimal("116880.00"),
        "exe_cost": Decimal("0.00"),
        "exe_to_lowest_rent": 0.0,
        "highest_monthly_rent": Decimal("0.00"),
        "inq_cost": Decimal("0.00"),
        "inq_tou": 0.3888888888888889,
        "inquiries": 36,
        "investment": Decimal("0.00"),
        "lease_applications": 5,
        "lease_cd_rate": 0.2,
        "lease_cds": 1,
        "lease_renewal_notices": 1,
        "lease_renewals": 0,
        "lease_vacation_notices": 5,
        "leased_rate": 0.8136363636363636,
        "leased_units": 179,
        "leased_units_end": 179,
        "leased_units_start": 172,
        "leases_ended": 0,
        "leases_executed": 4,
        "lowest_monthly_rent": Decimal("1400.00"),
        "move_ins": 5,
        "move_outs": 0,
        "occupancy_rate": 0.8492462311557789,
        "occupiable_units": 199,
        "occupiable_units_start": 199,
        "occupied_units": 169,
        "occupied_units_end": None,
        "occupied_units_start": 164,
        "renewal_rate": 0.16666666666666666,
        "resident_decisions": 6,
        "ret_demand_creation": Decimal("0.00"),
        "ret_investment": Decimal("0.00"),
        "ret_leasing_enablement": Decimal("0.00"),
        "ret_market_intelligence": Decimal("0.00"),
        "ret_reputation_building": Decimal("0.00"),
        "ret_romi": 0,
        "romi": 0,
        "start": datetime.date(2019, 9, 14),
        "tou_app": 0.35714285714285715,
        "tou_cost": Decimal("0.00"),
        "tours": 14,
        "usv_cost": Decimal("0.00"),
        "usv_exe": 0.00966183574879227,
        "usv_inq": 0.08695652173913043,
        "usvs": 414,
        "total_units": 220,
    },
]

all_target_computed_kpis = [
    {
        "acq_demand_creation": Decimal("0.00"),
        "acq_investment": Decimal("1998.43"),
        "acq_leasing_enablement": Decimal("0.00"),
        "acq_market_intelligence": Decimal("0.00"),
        "acq_reputation_building": Decimal("0.00"),
        "acq_romi": 70,
        "app_cost": Decimal("285.49"),
        "app_exe": 0.8571428571428571,
        "average_monthly_rent": Decimal("1948.00"),
        "delta_leases": 4,
        "end": datetime.date(2019, 9, 28),
        "estimated_acq_revenue_gain": Decimal("140256.00"),
        "estimated_ret_revenue_gain": Decimal("70128.00"),
        "estimated_revenue_gain": Decimal("210384.00"),
        "exe_cost": Decimal("333.07"),
        "exe_to_lowest_rent": 0.23790714285714284,
        "highest_monthly_rent": Decimal("0.00"),
        "inq_cost": Decimal("57.10"),
        "inq_tou": 0.37142857142857144,
        "inquiries": 35,
        "investment": Decimal("2788.43"),
        "lease_applications": 7,
        "lease_cds": 1,
        "lease_renewal_notices": 3,
        "lease_renewals": 0,
        "lease_vacation_notices": 2,
        "leased_rate": 0.8994974874371859,
        "leased_units": 179,
        "leased_units_end": 179,
        "leased_units_start": 172,
        "leases_ended": 0,
        "leases_executed": 6,
        "lowest_monthly_rent": Decimal("1400.00"),
        "move_ins": 6,
        "move_outs": 2,
        "occupancy_rate": 0.6818181818181818,
        "occupiable_units": 199,
        "occupiable_units_start": 199,
        "occupied_units": 150,
        "occupied_units_end": None,
        "occupied_units_start": 164,
        "renewal_rate": 0.6,
        "resident_decisions": 5,
        "ret_demand_creation": Decimal("0.00"),
        "ret_investment": Decimal("790.00"),
        "ret_leasing_enablement": Decimal("0.00"),
        "ret_market_intelligence": Decimal("0.00"),
        "ret_reputation_building": Decimal("0.00"),
        "ret_romi": 89,
        "romi": 75,
        "start": datetime.date(2019, 9, 21),
        "tou_app": 0.5384615384615384,
        "tou_cost": Decimal("153.73"),
        "tours": 13,
        "usv_cost": Decimal("4.16"),
        "usv_exe": 0.0125,
        "usv_inq": 0.07291666666666667,
        "usvs": 480,
        "total_units": 220,
    },
    {
        "acq_demand_creation": Decimal("0.00"),
        "acq_investment": Decimal("1998.43"),
        "acq_leasing_enablement": Decimal("0.00"),
        "acq_market_intelligence": Decimal("0.00"),
        "acq_reputation_building": Decimal("0.00"),
        "acq_romi": 70,
        "app_cost": Decimal("285.49"),
        "app_exe": 0.8571428571428571,
        "average_monthly_rent": Decimal("1948.00"),
        "delta_leases": 4,
        "end": datetime.date(2019, 9, 21),
        "estimated_acq_revenue_gain": Decimal("140256.00"),
        "estimated_ret_revenue_gain": Decimal("70128.00"),
        "estimated_revenue_gain": Decimal("210384.00"),
        "exe_cost": Decimal("333.07"),
        "exe_to_lowest_rent": 0.23790714285714284,
        "highest_monthly_rent": Decimal("0.00"),
        "inq_cost": Decimal("57.10"),
        "inq_tou": 0.37142857142857144,
        "inquiries": 35,
        "investment": Decimal("2788.43"),
        "lease_applications": 7,
        "lease_cds": 1,
        "lease_renewal_notices": 3,
        "lease_renewals": 0,
        "lease_vacation_notices": 2,
        "leased_rate": 0.8994974874371859,
        "leased_units": 179,
        "leased_units_end": 179,
        "leased_units_start": 172,
        "leases_ended": 0,
        "leases_executed": 6,
        "lowest_monthly_rent": Decimal("1400.00"),
        "move_ins": 6,
        "move_outs": 2,
        "occupancy_rate": 0.6818181818181818,
        "occupiable_units": 199,
        "occupiable_units_start": 199,
        "occupied_units": 150,
        "occupied_units_end": None,
        "occupied_units_start": 164,
        "renewal_rate": 0.6,
        "resident_decisions": 5,
        "ret_demand_creation": Decimal("0.00"),
        "ret_investment": Decimal("790.00"),
        "ret_leasing_enablement": Decimal("0.00"),
        "ret_market_intelligence": Decimal("0.00"),
        "ret_reputation_building": Decimal("0.00"),
        "ret_romi": 89,
        "romi": 75,
        "start": datetime.date(2019, 9, 14),
        "tou_app": 0.5384615384615384,
        "tou_cost": Decimal("153.73"),
        "tours": 13,
        "usv_cost": Decimal("4.16"),
        "usv_exe": 0.0125,
        "usv_inq": 0.07291666666666667,
        "usvs": 480,
        "total_units": 220,
    },
]

kpis_trends = [
    {
        "name": "usvs",
        "trend": Trend.up,
        "weeks": 3,
        "values": [4, 5, 6],
        "target_values": [6, 7, 8],
    },
    {
        "name": "usv_inq",
        "trend": Trend.down,
        "weeks": 3,
        "values": [4, 1, None],
        "target_values": [5, 6, 3],
    },
    {
        "name": "inquiries",
        "trend": Trend.flat,
        "weeks": 3,
        "values": [0, 0, 0],
        "target_values": [3, 3, 3],
    },
    {
        "name": "inq_tou",
        "trend": Trend.down,
        "weeks": 3,
        "values": [4, 3, 2],
        "target_values": [5, 3, 4],
    },
]
